local recoverHurtAmount = {100, 300, 700, 1200}

TalkEvent["/dk"] = function (player)
    if 1 == player:getCheckIn() then
        player:feverStop()
        return
    end

    if player:subMoney(200) > 0 then
        player:feverStart()
        return
    end
end

TalkEvent["/hc"] = function (player)
    player:warp(0,1000,240,80)
end

TalkEvent["/zl"] = function (player)
    local health = math.ceil(player:getHurtStatus() / 25)
    if health == 0 then
        player:sysMsg("您没有受伤，无需治疗。")
        return
    end
    local amount = recoverHurtAmount[health]
    if player:subMoney(amount) > 0 then
        player:recoverHurt()
        player:sysMsg("治疗成功，您已经恢复健康。")
        return
    end

    player:sysMsg("您的魔币不足" .. amount .."，治疗失败。")
end

TalkEvent["/1"] = function (player)
    if player:isYudi() then
        player:stopYudi()
        return
    end

    player:startYudi()
end

TalkEvent["/3"] = function (player)
    player:switchQietu()
end

TalkEvent["/4"] = function (player)
    player:switchZhizao()
end

TalkEvent["[petfy]"] = function (player)
    for i=0,4 do
        myPet = MyPet:new(player:getObj(), pet, i)
        if not myPet:isValid() then
            return;
        end
        myPet:initXz()
    end
end

TalkEvent["[bianjie]"] = function (player)
    Protocol.SendLuaCustomPacket(player:getObj(),"khd_bianjie", "会员系统,[vip]|签到,[qiandao2]|日常任务,[routine]|pk系统,[pk]|种族专精,[proficient]|宠物合成,[synthesis]|宠物觉醒,[awakening]|强化,[QiangHua]|坐骑,[zuoqi2]|翅膀,[#ChiBang]");
end

TaskHandler[99] = function(regNum, info)
    if regNum == 0 then
        NLG.SystemMessage(-1, info)
    elseif rawget(vipInfo, regNum) ~= nil then
        NLG.SystemMessage(vipInfo[regNum]["index"], info)
    end

    return 1
end
